# 1、封装一个工具节点
    1. 解析ai_message,提取工具调用的信息
    2. 对llm所需要调用的工具，去做并行调用
    3. 处理工具调用异常，对于不同异常类型，有不同的处理方式，封装成不同的ToolMessage的Content
   
# 2、封装一个middleware基类，用于在before_agent和before_model这两个切片点，添加自定义逻辑
    1. 定义一个基类，用于定义before_agent和before_model这两个切片点，后面middleware继承这个基类，重写这两个方法

# 3、构建agent
    1.构建一个LLM Node
    2.调用llm.bind_tools(tools)
    3.添加tool_node到graph中
    4.判断是否需要添加middleware，如果需要，将其作为节点添加到graph中
    5.调用builder.compile()，得到graph